{
  "last_node_id": 194,
  "last_link_id": 478,
  "nodes": [
    {
      "id": 103,
      "type": "Reroute",
      "pos": [
        1236,
        220
      ],
      "size": [
        75,
        26
      ],
      "flags": {},
      "order": 41,
      "mode": 0,
      "inputs": [
        {
          "name": "",
          "type": "*",
          "link": 375
        }
      ],
      "outputs": [
        {
          "name": "SEGS",
          "type": "SEGS",
          "links": [
            409
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "showOutputText": true,
        "horizontal": false
      }
    },
    {
      "id": 107,
      "type": "SaveImage",
      "pos": [
        760,
        660
      ],
      "size": {
        "0": 670,
        "1": 880
      },
      "flags": {},
      "order": 37,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 426
        }
      ],
      "title": "Prompt",
      "properties": {},
      "widgets_values": [
        "original"
      ]
    },
    {
      "id": 117,
      "type": "PreviewImage",
      "pos": [
        1928,
        112
      ],
      "size": {
        "0": 220.6817169189453,
        "1": 295.3673400878906
      },
      "flags": {},
      "order": 46,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 404
        }
      ],
      "title": "Cropped",
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 118,
      "type": "PreviewImage",
      "pos": [
        2170,
        110
      ],
      "size": {
        "0": 220,
        "1": 300
      },
      "flags": {},
      "order": 47,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 405
        }
      ],
      "title": "Enhanced",
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 143,
      "type": "PreviewImage",
      "pos": [
        2410,
        110
      ],
      "size": {
        "0": 210,
        "1": 300
      },
      "flags": {},
      "order": 48,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 406
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 132,
      "type": "BboxDetectorSEGS",
      "pos": [
        730,
        300
      ],
      "size": {
        "0": 315,
        "1": 212
      },
      "flags": {},
      "order": 39,
      "mode": 0,
      "inputs": [
        {
          "name": "bbox_detector",
          "type": "BBOX_DETECTOR",
          "link": 407
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 366
        },
        {
          "name": "detailer_hook",
          "type": "DETAILER_HOOK",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "SEGS",
          "type": "SEGS",
          "links": [
            373,
            375
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "BboxDetectorSEGS"
      },
      "widgets_values": [
        0.5,
        10,
        2,
        10,
        "all"
      ]
    },
    {
      "id": 151,
      "type": "UltralyticsDetectorProvider",
      "pos": [
        730,
        110
      ],
      "size": {
        "0": 315,
        "1": 78
      },
      "flags": {},
      "order": 0,
      "mode": 0,
      "outputs": [
        {
          "name": "BBOX_DETECTOR",
          "type": "BBOX_DETECTOR",
          "links": [
            407
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "SEGM_DETECTOR",
          "type": "SEGM_DETECTOR",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "UltralyticsDetectorProvider"
      },
      "widgets_values": [
        "bbox/face_yolov8m.pt"
      ]
    },
    {
      "id": 152,
      "type": "ImpactSegsAndMask",
      "pos": [
        1500,
        280
      ],
      "size": {
        "0": 168,
        "1": 46
      },
      "flags": {},
      "order": 42,
      "mode": 0,
      "inputs": [
        {
          "name": "segs",
          "type": "SEGS",
          "link": 409
        },
        {
          "name": "mask",
          "type": "MASK",
          "link": 408
        }
      ],
      "outputs": [
        {
          "name": "SEGS",
          "type": "SEGS",
          "links": [
            410
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ImpactSegsAndMask"
      }
    },
    {
      "id": 125,
      "type": "Reroute",
      "pos": [
        2122,
        -93
      ],
      "size": [
        82,
        26
      ],
      "flags": {},
      "order": 22,
      "mode": 0,
      "inputs": [
        {
          "name": "",
          "type": "*",
          "link": 353
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            398
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "showOutputText": true,
        "horizontal": false
      }
    },
    {
      "id": 139,
      "type": "SAMDetectorCombined",
      "pos": [
        1110,
        300
      ],
      "size": {
        "0": 315,
        "1": 218
      },
      "flags": {},
      "order": 40,
      "mode": 0,
      "inputs": [
        {
          "name": "sam_model",
          "type": "SAM_MODEL",
          "link": 376
        },
        {
          "name": "segs",
          "type": "SEGS",
          "link": 373
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 374
        }
      ],
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            408
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "SAMDetectorCombined"
      },
      "widgets_values": [
        "center-1",
        0,
        0.93,
        0,
        0.7,
        "False"
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 87,
      "type": "SAMLoader",
      "pos": [
        1105,
        103
      ],
      "size": {
        "0": 327.3000183105469,
        "1": 96.49998474121094
      },
      "flags": {},
      "order": 1,
      "mode": 0,
      "outputs": [
        {
          "name": "SAM_MODEL",
          "type": "SAM_MODEL",
          "links": [
            376
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "SAMLoader"
      },
      "widgets_values": [
        "sam_vit_b_01ec64.pth",
        "AUTO"
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 130,
      "type": "Reroute",
      "pos": [
        2120.9272289433748,
        -45.036994320749955
      ],
      "size": [
        75,
        26
      ],
      "flags": {},
      "order": 23,
      "mode": 0,
      "inputs": [
        {
          "name": "",
          "type": "*",
          "link": 354
        }
      ],
      "outputs": [
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [
            355,
            399,
            418
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "showOutputText": true,
        "horizontal": false
      }
    },
    {
      "id": 156,
      "type": "CLIPTextEncode",
      "pos": [
        2362,
        -101
      ],
      "size": {
        "0": 390,
        "1": 140
      },
      "flags": {},
      "order": 27,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 418
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            419
          ],
          "slot_index": 0
        }
      ],
      "title": "Face Prompt",
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "embedding:ng_deepnegative_v1_75t, (low quality:1.5), (worst quality:1.5), strabismus, pen, pencil, text, watermark, artist name, signature, letterboxed, bag, shoulder bag, briefcase, outerwears, jacket, coat, cardigan, suit, tire, 3d, perfect hand, perfect fingers, straw hat, wings, animal ears, crowd, embedding:bhands-neg, animal tail, car, "
      ]
    },
    {
      "id": 124,
      "type": "CLIPTextEncode",
      "pos": [
        2352,
        -298
      ],
      "size": {
        "0": 390,
        "1": 140
      },
      "flags": {},
      "order": 26,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 355
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            401
          ],
          "slot_index": 0
        }
      ],
      "title": "Face Prompt",
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "joyful, closeup portrait, looking away, sv1, "
      ]
    },
    {
      "id": 146,
      "type": "Note",
      "pos": [
        107,
        269
      ],
      "size": {
        "0": 356.19195556640625,
        "1": 95.9917221069336
      },
      "flags": {},
      "order": 2,
      "mode": 0,
      "title": "crop_factor #1",
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "\nThe crop factor determines how much larger the area will be cut out relative to the size of the mask."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 150,
      "type": "Note",
      "pos": [
        49,
        414
      ],
      "size": {
        "0": 356.19195556640625,
        "1": 95.9917221069336
      },
      "flags": {},
      "order": 3,
      "mode": 0,
      "title": "crop_factor #2",
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "\nIf the crop_factor is too small, it won't consider the surrounding image, leading to significant discrepancies in the recreated image."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 94,
      "type": "Reroute",
      "pos": [
        559,
        445
      ],
      "size": [
        82,
        26
      ],
      "flags": {},
      "order": 38,
      "mode": 0,
      "inputs": [
        {
          "name": "",
          "type": "*",
          "link": 427
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            366,
            374,
            428
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "showOutputText": true,
        "horizontal": false
      }
    },
    {
      "id": 166,
      "type": "VAEEncode",
      "pos": [
        2705,
        563
      ],
      "size": {
        "0": 210,
        "1": 46
      },
      "flags": {},
      "order": 45,
      "mode": 0,
      "inputs": [
        {
          "name": "pixels",
          "type": "IMAGE",
          "link": 431
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            432
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "VAEEncode"
      }
    },
    {
      "id": 115,
      "type": "SaveImage",
      "pos": [
        1516,
        668
      ],
      "size": {
        "0": 700,
        "1": 880
      },
      "flags": {},
      "order": 44,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 403
        }
      ],
      "title": "Refined",
      "properties": {},
      "widgets_values": [
        "refined"
      ]
    },
    {
      "id": 147,
      "type": "Note",
      "pos": [
        3837,
        821
      ],
      "size": {
        "0": 356.19195556640625,
        "1": 95.9917221069336
      },
      "flags": {},
      "order": 4,
      "mode": 0,
      "title": "guide_size_for",
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "\nThe guide_size_for specifies the target to which the guide_size is applied, whether it is the minimum bounding box of the detected area (including the mask) or the expanded cropped area determined by the crop_factor."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 148,
      "type": "Note",
      "pos": [
        3831,
        968
      ],
      "size": {
        "0": 356.19195556640625,
        "1": 95.9917221069336
      },
      "flags": {},
      "order": 5,
      "mode": 0,
      "title": "guide_size",
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "\nThe guide_size determines how much to enlarge the cropped area for re-creation. For example, if the guide_size_for is set to bbox, it adjusts the guide_size to match the minimum length of one side of the bbox."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 149,
      "type": "Note",
      "pos": [
        3835,
        1111
      ],
      "size": {
        "0": 345.7502746582031,
        "1": 113.13225555419922
      },
      "flags": {},
      "order": 6,
      "mode": 0,
      "title": "force_inpaint",
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "\nIf all sides are larger than the guide_size, there is no need to enlarge and recreate, so it will be skipped. However, if you want to force the recreation, you can enable force_inpaint. In this case, it will be recreated with a size of 1.0."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 168,
      "type": "VAEDecode",
      "pos": [
        3040,
        554
      ],
      "size": {
        "0": 210,
        "1": 46
      },
      "flags": {},
      "order": 50,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 433
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            434
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "VAEDecode"
      }
    },
    {
      "id": 169,
      "type": "SaveImage",
      "pos": [
        3034,
        654
      ],
      "size": {
        "0": 700,
        "1": 880
      },
      "flags": {},
      "order": 51,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 434
        }
      ],
      "title": "Refined",
      "properties": {},
      "widgets_values": [
        "refined"
      ]
    },
    {
      "id": 126,
      "type": "LoraLoader",
      "pos": [
        220,
        37
      ],
      "size": {
        "0": 410.2594299316406,
        "1": 150
      },
      "flags": {},
      "order": 17,
      "mode": 4,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 415
        },
        {
          "name": "clip",
          "type": "CLIP",
          "link": 416
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            353
          ],
          "slot_index": 0
        },
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [
            354
          ],
          "slot_index": 1
        }
      ],
      "properties": {
        "Node name for S&R": "LoraLoader"
      },
      "widgets_values": [
        "mix-face/chilloutmixss20_v20.safetensors",
        1,
        1,
        null
      ]
    },
    {
      "id": 145,
      "type": "DetailerForEachDebug",
      "pos": [
        2228,
        652
      ],
      "size": {
        "0": 390,
        "1": 900
      },
      "flags": {},
      "order": 43,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 428
        },
        {
          "name": "segs",
          "type": "SEGS",
          "link": 410
        },
        {
          "name": "model",
          "type": "MODEL",
          "link": 398
        },
        {
          "name": "clip",
          "type": "CLIP",
          "link": 399
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 417
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 401
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 419
        },
        {
          "name": "detailer_hook",
          "type": "DETAILER_HOOK",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            403,
            431
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "cropped",
          "type": "IMAGE",
          "links": [
            404
          ],
          "shape": 6,
          "slot_index": 1
        },
        {
          "name": "cropped_refined",
          "type": "IMAGE",
          "links": [
            405
          ],
          "shape": 6,
          "slot_index": 2
        },
        {
          "name": "cropped_refined_alpha",
          "type": "IMAGE",
          "links": [
            406
          ],
          "shape": 6,
          "slot_index": 3
        },
        {
          "name": "cnet_images",
          "type": "IMAGE",
          "links": null,
          "shape": 6
        }
      ],
      "properties": {
        "Node name for S&R": "DetailerForEachDebug"
      },
      "widgets_values": [
        512,
        false,
        768,
        305719074765042,
        "fixed",
        40,
        6.5,
        "dpmpp_3m_sde_gpu",
        "karras",
        0.5,
        5,
        true,
        true,
        "",
        1,
        false,
        0
      ]
    },
    {
      "id": 163,
      "type": "VAEDecode",
      "pos": [
        347,
        1373
      ],
      "size": {
        "0": 381.7952880859375,
        "1": 46.58692932128906
      },
      "flags": {},
      "order": 36,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 425
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            426,
            427
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "VAEDecode"
      }
    },
    {
      "id": 110,
      "type": "CLIPTextEncode",
      "pos": [
        363,
        1010
      ],
      "size": {
        "0": 381.7952880859375,
        "1": 213.58692932128906
      },
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            430,
            440,
            457
          ],
          "slot_index": 0
        }
      ],
      "title": "Negative Prompt",
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        ""
      ]
    },
    {
      "id": 178,
      "type": "ControlNetApplyAdvanced",
      "pos": [
        -694,
        1260
      ],
      "size": {
        "0": 315,
        "1": 166
      },
      "flags": {},
      "order": 33,
      "mode": 0,
      "inputs": [
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 439
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 440
        },
        {
          "name": "control_net",
          "type": "CONTROL_NET",
          "link": 442
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 441
        }
      ],
      "outputs": [
        {
          "name": "positive",
          "type": "CONDITIONING",
          "links": [
            448
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "links": [
            449
          ],
          "shape": 3,
          "slot_index": 1
        }
      ],
      "properties": {
        "Node name for S&R": "ControlNetApplyAdvanced"
      },
      "widgets_values": [
        1,
        0,
        1
      ]
    },
    {
      "id": 153,
      "type": "ModelSamplingContinuousEDM",
      "pos": [
        -1297,
        575
      ],
      "size": {
        "0": 315,
        "1": 106
      },
      "flags": {},
      "order": 16,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 411
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            412
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ModelSamplingContinuousEDM"
      },
      "widgets_values": [
        "edm_playground_v2.5",
        120,
        0.002
      ]
    },
    {
      "id": 105,
      "type": "CheckpointLoaderSimple",
      "pos": [
        -946,
        573
      ],
      "size": {
        "0": 315,
        "1": 122
      },
      "flags": {},
      "order": 8,
      "mode": 0,
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            411
          ],
          "slot_index": 0
        },
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [
            413
          ],
          "slot_index": 1
        },
        {
          "name": "VAE",
          "type": "VAE",
          "links": [
            414
          ],
          "slot_index": 2
        }
      ],
      "properties": {
        "Node name for S&R": "CheckpointLoaderSimple"
      },
      "widgets_values": [
        "playground-v2.5-1024px-aesthetic.fp16.safetensors",
        null
      ]
    },
    {
      "id": 154,
      "type": "Anything Everywhere3",
      "pos": [
        -597,
        577
      ],
      "size": {
        "0": 210,
        "1": 66
      },
      "flags": {},
      "order": 21,
      "mode": 0,
      "inputs": [
        {
          "name": "MODEL",
          "type": "*",
          "link": 412,
          "color_on": "#cba6f7"
        },
        {
          "name": "CLIP",
          "type": "*",
          "link": 413,
          "slot_index": 1,
          "color_on": "#fab387"
        },
        {
          "name": "VAE",
          "type": "*",
          "link": 414,
          "slot_index": 2,
          "color_on": "#cba6f7"
        }
      ],
      "properties": {
        "Node name for S&R": "Anything Everywhere3",
        "group_restricted": false,
        "color_restricted": false
      }
    },
    {
      "id": 155,
      "type": "CheckpointLoaderSimple",
      "pos": [
        -130,
        42
      ],
      "size": {
        "0": 315,
        "1": 122
      },
      "flags": {},
      "order": 9,
      "mode": 0,
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            415
          ],
          "slot_index": 0
        },
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [
            416
          ],
          "slot_index": 1
        },
        {
          "name": "VAE",
          "type": "VAE",
          "links": [
            417
          ],
          "slot_index": 2
        }
      ],
      "properties": {
        "Node name for S&R": "CheckpointLoaderSimple"
      },
      "widgets_values": [
        "real/beautifulRealistic_v7.safetensors",
        null
      ]
    },
    {
      "id": 162,
      "type": "LatentUpscaleBy",
      "pos": [
        28,
        1661
      ],
      "size": {
        "0": 315,
        "1": 82
      },
      "flags": {},
      "order": 32,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 472
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            474
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "LatentUpscaleBy"
      },
      "widgets_values": [
        "nearest-exact",
        1.5
      ]
    },
    {
      "id": 159,
      "type": "Empty Latent Ratio Select SDXL",
      "pos": [
        -1308,
        745
      ],
      "size": {
        "0": 319.20001220703125,
        "1": 82
      },
      "flags": {},
      "order": 10,
      "mode": 0,
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            455
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Empty Latent Ratio Select SDXL"
      },
      "widgets_values": [
        "9:16 [768x1344 portrait]",
        4
      ]
    },
    {
      "id": 183,
      "type": "VAEDecode",
      "pos": [
        -1526,
        1300
      ],
      "size": {
        "0": 381.7952880859375,
        "1": 46.58692932128906
      },
      "flags": {
        "collapsed": true
      },
      "order": 28,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 462
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            471
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "VAEDecode"
      }
    },
    {
      "id": 177,
      "type": "Seed (rgthree)",
      "pos": [
        -951,
        755
      ],
      "size": [
        276.1541581561214,
        139.05787920169564
      ],
      "flags": {},
      "order": 11,
      "mode": 0,
      "outputs": [
        {
          "name": "SEED",
          "type": "INT",
          "links": [
            461
          ],
          "shape": 3,
          "dir": 4,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Seed (rgthree)"
      },
      "widgets_values": [
        426857395422224,
        null,
        null,
        null
      ]
    },
    {
      "id": 164,
      "type": "KSampler",
      "pos": [
        2691,
        657
      ],
      "size": {
        "0": 310,
        "1": 700
      },
      "flags": {},
      "order": 49,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": null
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 429
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 430
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 432
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            433
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "KSampler"
      },
      "widgets_values": [
        98323244225763,
        "fixed",
        20,
        2,
        "dpmpp_sde_gpu",
        "karras",
        0.15
      ]
    },
    {
      "id": 180,
      "type": "ControlNetLoader",
      "pos": [
        -690,
        1465
      ],
      "size": [
        408.12593332269626,
        121.45811086705271
      ],
      "flags": {},
      "order": 12,
      "mode": 0,
      "outputs": [
        {
          "name": "CONTROL_NET",
          "type": "CONTROL_NET",
          "links": [
            442
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ControlNetLoader"
      },
      "widgets_values": [
        "SDXL/diffusers_xl_depth_full.safetensors",
        null
      ]
    },
    {
      "id": 179,
      "type": "MeshGraphormer-DepthMapPreprocessor",
      "pos": [
        -653,
        1644
      ],
      "size": {
        "0": 315,
        "1": 174
      },
      "flags": {},
      "order": 30,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 475
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            441,
            447
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "INPAINTING_MASK",
          "type": "MASK",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "MeshGraphormer-DepthMapPreprocessor"
      },
      "widgets_values": [
        30,
        512,
        "based_on_depth",
        5,
        88
      ]
    },
    {
      "id": 185,
      "type": "PreviewImage",
      "pos": [
        -645,
        1878
      ],
      "size": {
        "0": 365.2460632324219,
        "1": 434.6202087402344
      },
      "flags": {},
      "order": 34,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 447
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 184,
      "type": "PreviewImage",
      "pos": [
        -1062,
        1792
      ],
      "size": [
        390.3260288956359,
        520.7554407706566
      ],
      "flags": {},
      "order": 31,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 476
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 160,
      "type": "KSampler",
      "pos": [
        358,
        1666
      ],
      "size": [
        372.59126307600513,
        690.6733965104158
      ],
      "flags": {},
      "order": 35,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": null
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 448
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 449
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 474
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            425
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "KSampler"
      },
      "widgets_values": [
        98323244225763,
        "fixed",
        20,
        2,
        "dpmpp_sde_gpu",
        "karras",
        0.4
      ]
    },
    {
      "id": 109,
      "type": "CLIPTextEncode",
      "pos": [
        360,
        670
      ],
      "size": [
        382,
        204
      ],
      "flags": {},
      "order": 19,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": null
        },
        {
          "name": "text",
          "type": "STRING",
          "link": 477,
          "widget": {
            "name": "text"
          }
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            429,
            439,
            456
          ],
          "slot_index": 0
        }
      ],
      "title": "Positive Prompt",
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        " long shot, "
      ]
    },
    {
      "id": 188,
      "type": "KSamplerAdvanced",
      "pos": [
        -1055,
        1246
      ],
      "size": [
        315,
        334
      ],
      "flags": {},
      "order": 25,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": null
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 456
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 457
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 455
        },
        {
          "name": "noise_seed",
          "type": "INT",
          "link": 461,
          "widget": {
            "name": "noise_seed"
          },
          "slot_index": 4
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            462,
            473
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "KSamplerAdvanced"
      },
      "widgets_values": [
        "enable",
        40253994946486,
        "randomize",
        30,
        5,
        "dpmpp_sde_gpu",
        "karras",
        0,
        10000,
        "disable"
      ]
    },
    {
      "id": 172,
      "type": "LoadImage",
      "pos": [
        -2440,
        -494
      ],
      "size": [
        324.60921191406214,
        340.7193601074216
      ],
      "flags": {},
      "order": 13,
      "mode": 0,
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            436
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "719cf166a12ce568d146f4c9c407ae5ca453302e4e4d246ebc3e0c1d9c0c82d5.png.webp",
        "image"
      ]
    },
    {
      "id": 170,
      "type": "LoadImage2TextModel",
      "pos": [
        -2060,
        -490
      ],
      "size": {
        "0": 315,
        "1": 106
      },
      "flags": {},
      "order": 14,
      "mode": 0,
      "outputs": [
        {
          "name": "IMAGE2TEXT_MODEL",
          "type": "IMAGE2TEXT_MODEL",
          "links": [
            435
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "LoadImage2TextModel"
      },
      "widgets_values": [
        "moondream1",
        "cuda",
        false
      ]
    },
    {
      "id": 171,
      "type": "Image2Text",
      "pos": [
        -2054,
        -317
      ],
      "size": {
        "0": 400,
        "1": 200
      },
      "flags": {},
      "order": 18,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "IMAGE2TEXT_MODEL",
          "link": 435
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 436
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            437
          ],
          "shape": 6,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Image2Text"
      },
      "widgets_values": [
        "Please describe this image in detail.",
        ""
      ]
    },
    {
      "id": 173,
      "type": "ShowText|pysssss",
      "pos": [
        -1625,
        -483
      ],
      "size": [
        441.2855883468678,
        349.69937186902376
      ],
      "flags": {},
      "order": 24,
      "mode": 0,
      "inputs": [
        {
          "name": "text",
          "type": "STRING",
          "link": 437,
          "widget": {
            "name": "text"
          }
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": null,
          "shape": 6
        }
      ],
      "properties": {
        "Node name for S&R": "ShowText|pysssss"
      },
      "widgets_values": [
        "",
        "The image features a beautiful young woman dressed in a green gown, sitting on top of a flower. She is surrounded by numerous flowers, which are scattered around her and the flower she is sitting on. The woman appears to be the main focus of the scene, with her dressed in a traditional Chinese dress. The flowers and the gown create a serene and elegant atmosphere in the image."
      ]
    },
    {
      "id": 193,
      "type": "BilboXPhotoPrompt",
      "pos": [
        -2479,
        10
      ],
      "size": {
        "0": 400,
        "1": 460.0000305175781
      },
      "flags": {},
      "order": 15,
      "mode": 0,
      "outputs": [
        {
          "name": "full_composed_prompt",
          "type": "STRING",
          "links": [
            477,
            478
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "subject_only",
          "type": "STRING",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "BilboXPhotoPrompt"
      },
      "widgets_values": [
        true,
        "analogue",
        "a beautiful young woman dressed in a white gown, sitting on top of lotus. She is surrounded by numerous flowers, which are scattered around her and the flower she is sitting on. with her dressed in a traditional Chinese dress. ",
        "",
        "The flowers and the gown create a serene and elegant atmosphere ",
        "god rays",
        "from above/high angle",
        "Lumix GH5",
        "Lomochrome color film",
        "",
        "",
        "Alberto Seveso",
        "analogue photo of a beautiful young woman dressed in a white gown, sitting on top of lotus. She is surrounded by numerous flowers, which are scattered around her and the flower she is sitting on. The woman appears to be the main focus of the scene, with her dressed in a traditional Chinese dress. The flowers and the gown create a serene and elegant atmosphere in the image., god rays, from above/high angle, Lumix GH5, Lomochrome color film, in the style of Alberto Seveso",
        "No"
      ]
    },
    {
      "id": 194,
      "type": "ShowText|pysssss",
      "pos": [
        -2020,
        -6
      ],
      "size": [
        342.7915267663366,
        486.01844451387797
      ],
      "flags": {},
      "order": 20,
      "mode": 0,
      "inputs": [
        {
          "name": "text",
          "type": "STRING",
          "link": 478,
          "widget": {
            "name": "text"
          }
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": null,
          "shape": 6
        }
      ],
      "properties": {
        "Node name for S&R": "ShowText|pysssss"
      },
      "widgets_values": [
        "",
        "analogue photo of a beautiful young woman dressed in a white gown, sitting on top of lotus. She is surrounded by numerous flowers, which are scattered around her and the flower she is sitting on. The woman appears to be the main focus of the scene, with her dressed in a traditional Chinese dress. The flowers and the gown create a serene and elegant atmosphere in the image., god rays, from above/high angle, Lumix GH5, Lomochrome color film, in the style of Alberto Seveso"
      ]
    },
    {
      "id": 192,
      "type": "Preview Chooser",
      "pos": [
        -3033,
        1200
      ],
      "size": [
        1365.4354885979174,
        1356.14556808392
      ],
      "flags": {},
      "order": 29,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 471
        },
        {
          "name": "latents",
          "type": "LATENT",
          "link": 473
        }
      ],
      "outputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "links": [
            475,
            476
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "latent",
          "type": "LATENT",
          "links": [
            472
          ],
          "shape": 3,
          "slot_index": 1
        }
      ],
      "properties": {
        "Node name for S&R": "Preview Chooser"
      },
      "widgets_values": [
        "Always pause",
        1,
        "",
        ""
      ]
    }
  ],
  "links": [
    [
      353,
      126,
      0,
      125,
      0,
      "*"
    ],
    [
      354,
      126,
      1,
      130,
      0,
      "*"
    ],
    [
      355,
      130,
      0,
      124,
      0,
      "CLIP"
    ],
    [
      366,
      94,
      0,
      132,
      1,
      "IMAGE"
    ],
    [
      373,
      132,
      0,
      139,
      1,
      "SEGS"
    ],
    [
      374,
      94,
      0,
      139,
      2,
      "IMAGE"
    ],
    [
      375,
      132,
      0,
      103,
      0,
      "*"
    ],
    [
      376,
      87,
      0,
      139,
      0,
      "SAM_MODEL"
    ],
    [
      398,
      125,
      0,
      145,
      2,
      "MODEL"
    ],
    [
      399,
      130,
      0,
      145,
      3,
      "CLIP"
    ],
    [
      401,
      124,
      0,
      145,
      5,
      "CONDITIONING"
    ],
    [
      403,
      145,
      0,
      115,
      0,
      "IMAGE"
    ],
    [
      404,
      145,
      1,
      117,
      0,
      "IMAGE"
    ],
    [
      405,
      145,
      2,
      118,
      0,
      "IMAGE"
    ],
    [
      406,
      145,
      3,
      143,
      0,
      "IMAGE"
    ],
    [
      407,
      151,
      0,
      132,
      0,
      "BBOX_DETECTOR"
    ],
    [
      408,
      139,
      0,
      152,
      1,
      "MASK"
    ],
    [
      409,
      103,
      0,
      152,
      0,
      "SEGS"
    ],
    [
      410,
      152,
      0,
      145,
      1,
      "SEGS"
    ],
    [
      411,
      105,
      0,
      153,
      0,
      "MODEL"
    ],
    [
      412,
      153,
      0,
      154,
      0,
      "*"
    ],
    [
      413,
      105,
      1,
      154,
      1,
      "*"
    ],
    [
      414,
      105,
      2,
      154,
      2,
      "*"
    ],
    [
      415,
      155,
      0,
      126,
      0,
      "MODEL"
    ],
    [
      416,
      155,
      1,
      126,
      1,
      "CLIP"
    ],
    [
      417,
      155,
      2,
      145,
      4,
      "VAE"
    ],
    [
      418,
      130,
      0,
      156,
      0,
      "CLIP"
    ],
    [
      419,
      156,
      0,
      145,
      6,
      "CONDITIONING"
    ],
    [
      425,
      160,
      0,
      163,
      0,
      "LATENT"
    ],
    [
      426,
      163,
      0,
      107,
      0,
      "IMAGE"
    ],
    [
      427,
      163,
      0,
      94,
      0,
      "*"
    ],
    [
      428,
      94,
      0,
      145,
      0,
      "IMAGE"
    ],
    [
      429,
      109,
      0,
      164,
      1,
      "CONDITIONING"
    ],
    [
      430,
      110,
      0,
      164,
      2,
      "CONDITIONING"
    ],
    [
      431,
      145,
      0,
      166,
      0,
      "IMAGE"
    ],
    [
      432,
      166,
      0,
      164,
      3,
      "LATENT"
    ],
    [
      433,
      164,
      0,
      168,
      0,
      "LATENT"
    ],
    [
      434,
      168,
      0,
      169,
      0,
      "IMAGE"
    ],
    [
      435,
      170,
      0,
      171,
      0,
      "IMAGE2TEXT_MODEL"
    ],
    [
      436,
      172,
      0,
      171,
      1,
      "IMAGE"
    ],
    [
      437,
      171,
      0,
      173,
      0,
      "STRING"
    ],
    [
      439,
      109,
      0,
      178,
      0,
      "CONDITIONING"
    ],
    [
      440,
      110,
      0,
      178,
      1,
      "CONDITIONING"
    ],
    [
      441,
      179,
      0,
      178,
      3,
      "IMAGE"
    ],
    [
      442,
      180,
      0,
      178,
      2,
      "CONTROL_NET"
    ],
    [
      447,
      179,
      0,
      185,
      0,
      "IMAGE"
    ],
    [
      448,
      178,
      0,
      160,
      1,
      "CONDITIONING"
    ],
    [
      449,
      178,
      1,
      160,
      2,
      "CONDITIONING"
    ],
    [
      455,
      159,
      0,
      188,
      3,
      "LATENT"
    ],
    [
      456,
      109,
      0,
      188,
      1,
      "CONDITIONING"
    ],
    [
      457,
      110,
      0,
      188,
      2,
      "CONDITIONING"
    ],
    [
      461,
      177,
      0,
      188,
      4,
      "INT"
    ],
    [
      462,
      188,
      0,
      183,
      0,
      "LATENT"
    ],
    [
      471,
      183,
      0,
      192,
      0,
      "IMAGE"
    ],
    [
      472,
      192,
      1,
      162,
      0,
      "LATENT"
    ],
    [
      473,
      188,
      0,
      192,
      1,
      "LATENT"
    ],
    [
      474,
      162,
      0,
      160,
      3,
      "LATENT"
    ],
    [
      475,
      192,
      0,
      179,
      0,
      "IMAGE"
    ],
    [
      476,
      192,
      0,
      184,
      0,
      "IMAGE"
    ],
    [
      477,
      193,
      0,
      109,
      1,
      "STRING"
    ],
    [
      478,
      193,
      0,
      194,
      0,
      "STRING"
    ]
  ],
  "groups": [
    {
      "title": "Detection & Mask Generation",
      "bounding": [
        664,
        13,
        1218,
        532
      ],
      "color": "#3f789e",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "1 Pass",
      "bounding": [
        14,
        575,
        1454,
        1195
      ],
      "color": "#3f789e",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Face Swap",
      "bounding": [
        1489,
        575,
        1158,
        1195
      ],
      "color": "#3f789e",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Detailer Preview",
      "bounding": [
        1901,
        13,
        749,
        530
      ],
      "color": "#3f789e",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Refine 2 pass",
      "bounding": [
        2680,
        298,
        1087,
        1474
      ],
      "color": "#3f789e",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "fix hands",
      "bounding": [
        -1555,
        1195,
        1335,
        1158
      ],
      "color": "#3f789e",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Prompt",
      "bounding": [
        -2849,
        -552,
        1730,
        1062
      ],
      "color": "#3f789e",
      "font_size": 24,
      "locked": false
    }
  ],
  "config": {},
  "extra": {
    "0246.VERSION": [
      0,
      0,
      4
    ]
  },
  "version": 0.4
}